---
layout: post
title: 科普--字符编码和字符集
---

作为一只程序猿，或多或少的会在开发过程中遇到字符编码的问题，或许是一次莫名其妙的”？？？”，或许是“锟斤拷”。那么问题的根源在哪里呢？在平常的开发过程中怎么去解决乱码问题呢？要解决这些疑问就需要了解字符编码和字符集的概念。

##背景##
在正式介绍字符集之前，先简单介绍一下字符在计算机中的存储形式。在计算机中，所有的数据都以二进制编码方式存储，当然字符也不例外。以最常用的ASCII码为例，字符’A’，在计算机中的存储形式是0b01000001(0x41)，即十进制的65。那么为啥是65？因为在ASCII码表中字符’A’位于第66个，从0开始计算正好是65，所以用65表示。

在上面的例子中ASCII码所能表示的所有字符集合称为***ASCII字符集***，65称为字符’A’的***Code Point***。对于ASCII字符集，所有Code Point的集合0x00~0xFF称为***编码字符集***，那么从编码字符集到最终实际存储数据的转换过程称之为字符编码，对于ASCII码来说，不需要进行任何转换，直接存储其编码字符集的值。那么哪些情况需要用到字符编码呢？

##GB2312和Unicode##
  对于ASCII码来说，显然没办法表示汉字，更不用说其他各种国家的各种字符了，so...各个国家都或多或少的制定了一些额外的编码字符集。对于汉字来说就有GB2312、GBK、GB18030等等。(GB2312、GBK、GB18030的表示规则不是本文的重点内容，请参考https://zh.wikipedia.org/wiki/GB_2312)需要注意的是这三种字符集的编码方式向上兼容，所表示的字符集范围有所扩展。

为了统一字符集，Unicode字符集应运而生，其包含了绝大部分的字符，并且还在不断扩展，对于Unicode来说，每个字符有一个唯一的二进制表示方式（Code Point），那么这些个二进制数据应该如何存储呢？对于Unicode中的ASCII字符来说，一个字节就可以表示完整，但是对于其他语言的字符则需要多个字节，如果统一规定按照3字节或者4字节存储二进制数据，则会造成存储的极大浪费。为了解决这个问题，就需要用到字符编码。

## UTF-8和UTF-16##
*所谓字符编码，就是针对特定字符集，把其Code Point转换为对应存储格式的算法。UTF-8和UTF-16是针对Unicode字符集的两种不同编码方式。*

UTF-8采用可变字节数才存储数据，对于不同的字符，其需要的字节数不一样，并在每个字节的高位描述下一字节与本字节的关系，具体编码方式请参考https://zh.wikipedia.org/wiki/UTF-8而UTF-16是Unicode字符集的另外一种字符编码方式，采用每个字符两个字节的方式存储，这种编码方式会带来大小端的问题，值得注意的是Java平台中的char、String采用的是UTF-16编码方式存储。

##乱码##
区分了字符集合字符编码的概念，那产生？？？或者“锟斤拷”的原因就比较好理解了，当接收方拿到二进制数据之后，如果不清楚元数据的字符集或者编码方式，按照错误的方式解码就会出现乱码问题了。
